<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    <script type="text/javascript" src="{{ url_for('static', filename='script.js') }}" defer></script>
    <title>HabiTrain | Overcome Bad Habits</title>
</head>
<body>
  <!-- Navigation Bar -->
  <header>
    <nav class="navbar">
      <div class="navbar-content">
        <a href="{{ url_for('views.index') }}"><div class="logo-container">
            <img src="{{url_for('static', filename='images/logo.png')}}" class="logo filtered">
            <span>HabiTrain</span>
        </div></a>
        <div class="nav-links">
                <a href="{{ url_for('views.index') }}">Home</a>
                <a href="{{ url_for('views.about_us') }}">About Us</a>
                <a href="{{ url_for('views.contact') }}">Contact</a>
        </div>
       
        <div class="nav-btns">
            <img src="{{url_for('static', filename='images/user-icon.png')}}" id="companion-image" class="profile-icon" alt="cannot" onclick="toggleMenu()">
            <div class = "sub-menu-container" id="sub-menu-container">
              <div class="sub-menu">
                <div class = "user-info">
                  <img src="{{url_for('static', filename='images/dog.png')}}">
                  <h1> {% if username %} {{ username }} {% else %} Username {% endif %}</h1>
                </div>
                <hr>

                <a href="{{ url_for('views.settings') }}" class="sub-menu-link">
                <img src="{{url_for('static', filename='images/settings.png')}}">
                <p >Settings</p>
                <span>></span>
                </a>

                <a href="{{ url_for('views.companion_hub') }}" class="sub-menu-link">
                <img src="{{url_for('static', filename='images/home.png')}}">
                <p class="sub-menu-link-active">Companion Hub</p>
                <span>></span>
                </a>

                    <a href="{{ url_for('auth.logout') }}" class="sub-menu-link">
                  <img src="{{url_for('static', filename='images/logout.png')}}">
                  <p>Log out</p>
                  <span>></span>
                </a>
              </div>
            </div>       
        </div>
      </div>
    </nav>
</header>

<!-- Footer section -->
<div class="footer-bottom slide-up">
    <p>Â© 2025 HabiTrain</p>
    <a href="{{ url_for('views.attributions')}}" class="attributions">This page is powered by Creative Commons resources. Click here for more information.</a>
</div>  
  

  <!-- Html Code for Modals / Popups -->
  <!-- Sign in Modal-->
  <div id="sign-in-modal" class="modal">
    <div class="modal-content">
        <span id="close-btn-1" class="close-btn">&times;</span>
        <div class="modal-inner-padding">
          <img src="{{ url_for('static', filename='images/logo.png') }}" class="modal-logo">
          <h2>Welcome Back</h2>
          <form action="{{ url_for('auth.sign_in') }}" method="POST">
              <label for="username">Username:</label>
              <input type="text" id="username" name="username" autocomplete="username" placeholder="Enter your username" required>
              
              <label for="password">Password:</label>
              <div class="password-container">
                <input type="password" id="password-sign-in" name="password" placeholder="Enter your password" autocomplete="current-password" required>
                <img class="toggle-password" id="toggle-password-sign-in" alt="" src="{{ url_for('static', filename='images/eye-hide.png') }}">
              </div>

              <div class="forgot-password" > 
                <a href="#" id="forgot-password-link">Forgot Password?</a>
              </div>

              <!-- Need to make the same like can't find - or incorrect username or password error -->
              <!-- <div id="password-mismatch-error" class="error-container" style="display: none;">
                <span class="error-icon">!</span>
                <span class="error-message-text">Passwords do not match!</span>
              </div> -->   

              <div class="button-container">
                <button type="submit" class="btn btn-primary">Log In</button>
              </div>
              
              <p class="follow-up-text">Don't have an account? <a href="#" id="registration-link">Register Now</a></p>
          </form>
      </div>
    </div>
  </div>

  <!-- Registration Modal -->
  <div id="registration-modal" class="modal">
    <div class="modal-content">
        <span id="close-btn-2" class="close-btn">&times;</span>
        <div class="modal-inner-padding">
            <img src="{{ url_for('static', filename='images/logo.png') }}" class="modal-logo">
            <h2>Create an Account</h2>
            <form id="registration-form" action="{{ url_for('auth.registration') }}" method="POST">
            
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" autocomplete="username" placeholder="Enter your username" required>
                
                <label for="email">Email Address:</label>
                <input type="email" id="email" name="email" autocomplete="email" placeholder="Enter your email address" required>
                
                <label for="password">Password:</label>
                <div class="password-container">
                    <input type="password" id="registration-password" name="password" autocomplete="new-password" placeholder="Enter your password" required>
                    <img class="toggle-password" id="toggle-registration-password" alt="" src="{{ url_for('static', filename='images/eye-hide.png') }}">
                </div>

                <div class="confirm-password-container" id="confirm-password-container">
                    <label for="confirm-password">Confirm Password:</label>
                    <div class="password-container">
                        <input type="password" id="confirm-password" name="confirm_password" autocomplete="new-password" placeholder="Re-enter your password" required>
                        <img class="toggle-password" id="toggle-confirm-password" alt="" src="{{ url_for('static', filename='images/eye-hide.png') }}">
                    </div>
                </div>

                <div id="password-mismatch-error" class="error-container" style="display: none;">
                  <span class="error-icon">!</span>
                  <span class="error-message-text">Passwords do not match!</span>
                </div>

                <div class="checkbox-container">
                  <input type="checkbox" id="registration-waiver" name="registration_waiver" class="checkbox-waiver" required>
                  <label for="registration-waiver" id="">I read and agree to <a href="#">Terms & Conditions</a></label>
                </div>  
                
                <div class="button-container">
                    <button type="submit" class="btn btn-primary">Register</button>
                </div>
                
                <p class="follow-up-text">Already have an account? <a href="#" id="sign-in-link">Sign in</a></p>
            </form>
        </div>
    </div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => expectModalClick(), 0);
    setTimeout(() => showCorrectCompanionIcon("{{ companion }}"), 0);
    if (user_logged_in && bad_habit === 0) {
      setTimeout(() => launchBriefQuestionnaire(), 0);
    }
  });
</script>

</body>
</html>